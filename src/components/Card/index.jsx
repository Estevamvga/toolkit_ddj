import React from "react";

import { Button } from "react-bootstrap";
import { Icon } from "@iconify/react";

import { getPlatformIcon, getCategorySlug } from "../../utils/utils";

import styles from "./styles.module.scss";

const Card = ({ id, toolData, platforms, categories }) => {
  return (
    <article
      id={id}
      tabIndex="-1"
      className={`${styles.toolCard} ${
        toolData.destaque && styles.toolCardHighlight
      }`}
    >
      <header className={styles.cardHeader}>
        <h2 className={styles.toolName}>{toolData.nome}</h2>
        <p className={styles.toolDescription}>{toolData["descrição"]}</p>
      </header>
      <div className={styles.toolDetailsContainer}>
        <h3 className={styles.toolDetailsTitle}>Categorias</h3>
        <ul className={styles.categoriesList}>
          {toolData.categoria &&
            toolData.categoria.map((categoria, index) => {
              return (
                <li key={index}>
                  <span
                    className={`${styles.toolCategory} ${getCategorySlug(
                      categoria,
                      categories
                    )}`}
                  >
                    {categoria}
                  </span>
                </li>
              );
            })}
        </ul>
      </div>

      <div className={styles.toolDetailsContainer}>
        <h3 className={styles.toolDetailsTitle}>Plataformas</h3>
        <ul className={styles.platformList}>
          {toolData.plataforma &&
            toolData.plataforma.map((plataforma, index) => {
              return (
                <li
                  tabIndex="0"
                  aria-label={plataforma}
                  title={plataforma}
                  className={styles.platformIcon}
                  key={index}
                >
                  <span
                    style={{
                      height: "0",
                      width: "0",
                      opacity: "0",
                      position: "absolute",
                      left: "-9999px",
                    }}
                  >
                    {plataforma}
                  </span>
                  {plataforma !== "Web" ? (
                    <Icon
                      icon={`${getPlatformIcon(plataforma, platforms)}`}
                      color={styles.purple}
                    />
                  ) : (
                    <svg
                      width="29"
                      height="29"
                      viewBox="0 0 29 29"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M13.3036 0.305557C11.2136 0.544597 9.85828 0.914965 8.32064 1.66089C5.38765 3.079 3.1496 5.28854 1.73725 8.15873C1.29316 9.06997 0.683752 10.7384 0.769 10.8239C0.791752 10.8466 1.21885 10.8582 1.71997 10.8524L2.61968 10.8354L2.83597 10.2375C3.08653 9.54257 3.46237 8.73993 3.82698 8.13052C4.25408 7.41859 4.10605 7.46984 5.11405 7.66913C5.59242 7.76014 6.3441 7.89118 6.78272 7.95944C7.21559 8.02193 7.58567 8.09049 7.59719 8.09625C7.60871 8.10777 7.55168 8.40959 7.47191 8.76815C7.39213 9.12124 7.2896 9.65663 7.23834 9.9527C7.19284 10.2488 7.13581 10.5791 7.11882 10.6816L7.09031 10.8697L8.941 10.8357L9.06052 10.1523C9.12877 9.77644 9.24282 9.20129 9.31684 8.87672L9.45364 8.2846L10.0515 8.32433C13.2463 8.52363 15.5241 8.52363 18.7189 8.32433L19.3168 8.2846L19.4478 8.84851C19.5161 9.16185 19.6301 9.73123 19.7041 10.1241L19.8352 10.836L21.6801 10.87L21.6516 10.6819C21.6346 10.5794 21.5776 10.249 21.5263 9.95299C21.4809 9.65692 21.3725 9.12153 21.2927 8.76844C21.2188 8.40959 21.1617 8.11353 21.1732 8.1023C21.1845 8.09078 21.5548 8.02252 21.9874 7.96003C22.426 7.89177 23.1777 7.76073 23.6561 7.66972C24.6641 7.47043 24.516 7.41916 24.9489 8.14232C25.302 8.72897 25.6894 9.56044 25.9399 10.2609L26.1508 10.836L27.0504 10.853C27.5515 10.8587 27.9786 10.8472 28.0014 10.8245C28.087 10.7389 27.4775 9.07055 27.0331 8.15932C24.9892 3.98995 21.0201 1.10274 16.3786 0.413845C15.7579 0.322549 13.7705 0.254293 13.3036 0.305557ZM15.2568 2.28729C16.2306 2.65161 17.1873 3.59135 17.9562 4.95244C18.2979 5.55033 18.691 6.4103 18.6397 6.4558C18.4974 6.59807 14.0553 6.68937 11.9598 6.59807C11.1114 6.55833 10.3366 6.50705 10.2399 6.48977L10.0576 6.45004L10.4504 5.65286C11.4357 3.66537 12.5289 2.53209 13.816 2.179C14.2319 2.06524 14.7727 2.10499 15.2568 2.28729ZM9.53917 3.5231C9.19184 4.05273 8.59943 5.22575 8.34887 5.88067C8.27485 6.06844 8.20084 6.2395 8.18384 6.26225C8.1441 6.302 7.3809 6.20523 6.28189 6.01745L5.55296 5.89219L5.79776 5.63587C6.20788 5.21452 7.03357 4.54233 7.66573 4.12675C8.20688 3.7679 9.824 2.92521 9.87527 2.97071C9.88679 2.98223 9.733 3.23279 9.53917 3.5231ZM20.2511 3.61439C21.1793 4.11551 22.3295 4.96972 22.9732 5.63615L23.218 5.89247L22.4891 6.01775C21.3901 6.20582 20.6269 6.30259 20.5871 6.26255C20.5702 6.2398 20.4676 6.00623 20.3651 5.73868C20.0975 5.06102 19.5964 4.09276 19.209 3.50063C19.0325 3.22732 18.8845 2.98799 18.8845 2.97676C18.8845 2.93644 19.7159 3.3238 20.2511 3.61439Z"
                        fill="currentColor"
                      />
                      <path
                        d="M1.98782 11.9002C2.01058 11.9742 2.1301 12.3385 3.08136 15.26L3.62798 16.9568H5.09736L5.20565 16.655C5.26267 16.4956 5.46197 15.9319 5.64974 15.4078C5.83205 14.8842 5.99707 14.4743 6.01982 14.4971C6.03682 14.5199 6.24187 15.0838 6.47544 15.7441L6.89678 16.9572H8.37768L9.19214 14.4346C9.642 13.0507 10.0066 11.9005 10.0008 11.8719C10.0008 11.8492 9.61925 11.8322 9.1524 11.8322C8.3892 11.8322 8.29819 11.8437 8.26968 11.929C8.05886 12.6806 7.59202 14.258 7.5805 14.2696C7.56898 14.2811 7.3812 13.7341 7.15339 13.0622L6.74328 11.8322H5.28542L4.86955 13.068C4.64174 13.7514 4.44821 14.2811 4.44245 14.2525C4.43122 14.2183 4.27742 13.7059 4.10635 13.1135C3.92981 12.5156 3.77602 11.986 3.75902 11.929C3.73051 11.8434 3.6395 11.8322 2.84203 11.8322C2.1589 11.8319 1.96507 11.8489 1.98782 11.9002Z"
                        fill="currentColor"
                      />
                      <path
                        d="M10.6497 12.7543C10.8147 13.267 11.1909 14.4173 11.4812 15.3228L12.0166 16.963L13.4975 16.9289L13.9188 15.7159C14.1523 15.0552 14.3629 14.5086 14.3856 14.5086C14.4084 14.5086 14.6135 15.0552 14.847 15.7159L15.2739 16.9286L16.7548 16.9626L17.2331 15.4932C17.4949 14.6845 17.871 13.5286 18.0646 12.9248L18.4176 11.8313H16.6865L16.3843 12.8684C16.2136 13.4436 16.054 14.0017 16.0198 14.11C15.9685 14.3035 15.9457 14.258 15.5526 13.085L15.1425 11.8607L13.6732 11.8267L13.2745 13.0283C13.0583 13.6831 12.8644 14.2243 12.8475 14.2243C12.8304 14.2243 12.7051 13.8485 12.5683 13.3817C12.4315 12.9203 12.2723 12.3852 12.2095 12.1855L12.1012 11.8325H10.3536L10.6497 12.7543Z"
                        fill="currentColor"
                      />
                      <path
                        d="M18.7704 11.8717C18.7647 11.9002 19.1293 13.0505 19.5792 14.4343L20.3937 16.9568H21.8746L22.2959 15.7438C22.5237 15.0832 22.7287 14.5195 22.7515 14.4967C22.7685 14.474 22.9851 15.0094 23.2241 15.6925L23.6567 16.9286L25.143 16.9626L25.3481 16.3193C25.6954 15.243 26.7546 11.9799 26.7832 11.9002C26.806 11.8431 26.6293 11.8319 25.9405 11.8431L25.0636 11.8601L24.8297 12.6576C24.6987 13.0962 24.5337 13.6486 24.465 13.8818L24.334 14.309L23.5141 11.8604H22.0563L21.6519 13.0392C21.4299 13.6942 21.2363 14.2237 21.219 14.2237C21.2021 14.2237 21.0367 13.6884 20.8489 13.0392L20.5017 11.8604L19.6359 11.8434C19.1578 11.8377 18.7704 11.8489 18.7704 11.8717Z"
                        fill="currentColor"
                      />
                      <path
                        d="M26.4016 16.9001H28.053V15.2486H26.4016V16.9001Z"
                        fill="currentColor"
                      />
                      <path
                        d="M0.752287 17.971C0.684031 18.0847 1.3162 19.7706 1.77151 20.6873C2.53471 22.225 3.35465 23.3582 4.5677 24.5312C6.54943 26.4505 8.907 27.6918 11.5952 28.2329C17.2161 29.3604 22.9164 27.0142 26.1169 22.2535C26.5156 21.6556 27.1705 20.431 27.4326 19.7764C27.6947 19.1215 28.0477 18.0224 28.0192 17.9712C28.0019 17.9484 27.5748 17.9257 27.0683 17.9257H26.1455L25.9519 18.5009C25.7184 19.1843 25.2002 20.2721 24.8302 20.8414C24.688 21.0692 24.5569 21.2628 24.5512 21.2743C24.5396 21.2858 24.141 21.2172 23.6627 21.1205C23.1785 21.0292 22.4268 20.8985 21.9882 20.8298C21.5554 20.7674 21.1853 20.7046 21.1795 20.6934C21.168 20.6819 21.225 20.3688 21.3048 19.9987C21.5383 18.9282 21.6694 17.977 21.5951 17.9488C21.5554 17.9317 21.1452 17.9317 20.6784 17.9372L19.83 17.9542L19.7105 18.6377C19.6422 19.0135 19.5281 19.5886 19.4542 19.9132L19.3174 20.5054L18.7194 20.4655C16.7832 20.346 16.1113 20.3233 14.3856 20.3233C12.6603 20.3233 11.988 20.346 10.0518 20.4655L9.45391 20.5054L9.31711 19.9132C9.2431 19.5886 9.12934 19.0135 9.06079 18.6377L8.94127 17.9542L8.06431 17.9372C7.58594 17.9315 7.17036 17.943 7.14732 17.9657C7.09606 18.017 7.30111 19.2756 7.49465 20.1413C7.55743 20.4316 7.60294 20.6825 7.59718 20.6936C7.58594 20.6994 7.14156 20.7792 6.61193 20.8586C6.07654 20.9442 5.34214 21.0695 4.96601 21.1493C4.59593 21.2233 4.27135 21.2858 4.24831 21.2858C4.18006 21.2858 3.65042 20.3918 3.34284 19.7482C3.18329 19.4178 2.95548 18.8825 2.83596 18.5524L2.61967 17.9545L1.70268 17.9375C1.19638 17.9309 0.769279 17.9424 0.752287 17.971ZM17.0107 22.1964C18.3946 22.2647 18.6564 22.2932 18.6564 22.39C18.6564 22.5152 17.9332 23.9219 17.6369 24.3605C16.5209 26.0404 15.2052 26.8661 14.0034 26.6441C12.9785 26.4563 12.016 25.6931 11.1332 24.3605C10.8372 23.9219 10.114 22.5152 10.114 22.39C10.114 22.3502 10.2165 22.3044 10.3588 22.2817C11.2761 22.1564 15.1258 22.1052 17.0107 22.1964ZM8.40041 23.0507C8.69071 23.768 9.1181 24.6168 9.51094 25.2374C9.68748 25.5166 9.81852 25.7556 9.807 25.7729C9.74998 25.8241 8.32639 25.0951 7.75673 24.725C7.05055 24.2582 6.32162 23.6828 5.88329 23.233L5.55295 22.8968L6.28188 22.7716C7.13033 22.6294 8.07583 22.4926 8.13833 22.5041C8.16108 22.5095 8.2806 22.7543 8.40041 23.0507ZM21.333 22.595C21.5667 22.6236 22.0905 22.709 22.4891 22.7773L23.218 22.9026L22.8876 23.2387C22.4605 23.6716 21.7259 24.2582 21.0483 24.7024C20.4958 25.0669 19.021 25.8241 18.9697 25.7729C18.9527 25.7558 19.0837 25.5166 19.26 25.2374C19.7268 24.497 20.2908 23.341 20.5529 22.5835C20.5813 22.5095 20.6326 22.4926 20.7463 22.5095C20.8319 22.5265 21.0997 22.5607 21.333 22.595Z"
                        fill="currentColor"
                      />
                    </svg>
                  )}
                </li>
              );
            })}
        </ul>
      </div>

      <footer className={styles.cardFooter}>
        {toolData.link && (
          <Button
            variant={toolData.destaque ? "secondary" : "primary"}
            className={styles.cardButton}
            href={toolData.link}
            target="_blank"
          >
            <Icon icon="mdi:link-variant" color="#fff" />
            Site
          </Button>
        )}
        {toolData.github && (
          <Button
            variant={toolData.destaque ? "secondary" : "primary"}
            className={styles.cardButton}
            href={toolData.github}
            target="_blank"
          >
            <Icon icon="octicon:repo-forked-16" color="#fff" />
            Repositório
          </Button>
        )}
      </footer>
    </article>
  );
};

export default Card;
